const wordleContainer=document.querySelector(".wordle-container"),keyboardContainer=document.querySelector(".keyboard-container"),messageContainer=document.querySelector(".message-container");let guessWord,wordlist=[],wordle=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]];const keys=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","ENTER","Z","X","C","V","B","N","M","&#9003"];let activeSquareRow=0,activeSquareCol=0,isGameOver=!1;const generateBoard=()=>{for(let e=0;e<wordle.length;e++)for(let a=0;a<wordle[e].length;a++){const s=document.createElement("div");s.classList.add("square"),s.setAttribute("id",`${e}-${a}`),s.innerHTML=wordle[e][a],wordleContainer.appendChild(s)}fetchWordlist()},generateKeyboard=()=>{keys.forEach((e=>{const a=document.createElement("button");a.classList.add("keyboard-button"),a.setAttribute("id",e),"ENTER"!==e&&"&#9003"!==e||a.classList.add("long-key"),a.innerHTML=e,a.addEventListener("click",(()=>handleKeyPress(e))),a.addEventListener("mousedown",(()=>{a.classList.contains("green-key")?a.classList.add("pressed-green-key"):a.classList.contains("yellow-key")?a.classList.add("pressed-yellow-key"):a.classList.add("pressed")})),a.addEventListener("mouseup",(()=>{a.classList.contains("green-key")?a.classList.remove("pressed-green-key"):a.classList.contains("yellow-key")?a.classList.remove("pressed-yellow-key"):a.classList.remove("pressed")})),keyboardContainer.appendChild(a)}))},fetchWordlist=()=>{fetch("./words.json").then((e=>e.json())).then((e=>{wordlist=e,guessWord=getRandomWord()})).catch((e=>console.error(e)))},getRandomWord=()=>{const e=Math.floor(Math.random()*wordlist.length);return wordlist[e].word},handleKeyPress=e=>{isGameOver?"R"==e&&resetGame():"ENTER"===e?handleEnter():"&#9003"===e||"BACKSPACE"===e?handleBackspace():keys.includes(e)&&handleLetter(e)},displayMessage=(e,a=!1,s=2e3)=>{const o=`<p class="message">${e}</p>`;a?messageContainer.innerHTML+=o:messageContainer.innerHTML=o,s<=2e3&&setTimeout((()=>{messageContainer.innerHTML=""}),s)},updateBoard=(e,a,s)=>{const o=document.getElementById(`${e}-${a}`);o.innerHTML=wordle[e][a],"add"===s?(o.classList.add("active"),addAnimation(e,a,"zoom")):"remove"===s&&o.classList.remove("active")},resetGame=()=>{wordle=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]],activeSquareRow=0,activeSquareCol=0,isGameOver=!1,wordleContainer.innerHTML="",keyboardContainer.innerHTML="",messageContainer.innerHTML="",generateBoard(),generateKeyboard()},isValidWord=e=>{for(let a=0;a<wordlist.length;a++)if(wordlist[a].word===e)return!0;return!1},colorKey=(e,a)=>{const s=document.getElementById(e);s?.classList?.contains("green-key")&&"yellow"===a||(s?.classList?.contains("yellow-key")&&"green"===a&&s.classList.remove("yellow-key"),s?.classList?.add(`${a}-key`))},colorSquare=(e,a,s,o)=>{const t=document.getElementById(`${e}-${a}`);setTimeout((()=>{addAnimation(e,a,"flip"),t.classList.add(s),colorKey(o,s)}),500*a)},addAnimation=(e,a,s)=>{const o=document.getElementById(`${e}-${a}`);"flip"===s?o.classList.add("flip"):"shake"===s?(o.classList.add("shake"),setTimeout((()=>{o.classList.remove("shake")}),1e3)):"bounce"===s?setTimeout((()=>{o.classList.add("bounce")}),150*a):"zoom"===s&&(o.classList.add("zoom"),setTimeout((()=>{o.classList.remove("zoom")}),300))},getScore=(e,a)=>2*e+1*a,handleEnter=()=>{if(5===activeSquareCol){const s=wordle[activeSquareRow].join("");if(!isValidWord(s)){for(let e=0;e<activeSquareCol;e++)addAnimation(activeSquareRow,e,"shake");return void displayMessage("Not in Word List!")}const o={greens:0,yellows:0};if(s===guessWord){for(let e=0;e<activeSquareCol;e++)colorSquare(activeSquareRow,e,"green",s[e]),setTimeout((()=>{addAnimation(activeSquareRow,e,"bounce")}),2500);return displayMessage("🎊You win!🎊",!1,5e3),displayMessage("Press R to play again!",!0,5e3),void(isGameOver=!0)}if(wordle[activeSquareRow].forEach(((e,a)=>{guessWord.includes(e)?e===guessWord[a]?(colorSquare(activeSquareRow,a,"green",e),o.greens++):(colorSquare(activeSquareRow,a,"yellow",e),o.yellows++):colorSquare(activeSquareRow,a,"gray",e)})),s!==guessWord&&5===activeSquareRow)return displayMessage("👾Game Over!👾",!1,5e3),displayMessage("Press R to play again!",!0,5e3),void(isGameOver=!0);const t=(e=o.greens,a=o.yellows,2*e+1*a);t>0&&displayMessage(0<t&&t<=2?"Nice👏":2<t&&t<=5?"Great🌟":"Excellent🔥"),activeSquareCol=0,activeSquareRow++}var e,a},handleBackspace=()=>{activeSquareCol>0&&(activeSquareCol--,wordle[activeSquareRow][activeSquareCol]="",updateBoard(activeSquareRow,activeSquareCol,"remove"))},handleLetter=e=>{activeSquareCol<5&&(wordle[activeSquareRow][activeSquareCol]=e,updateBoard(activeSquareRow,activeSquareCol,"add"),activeSquareCol++)};document.addEventListener("keyup",(e=>handleKeyPress(e.key.toUpperCase()))),generateBoard(),generateKeyboard();